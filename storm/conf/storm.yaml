{% set nimbus_host = salt['publish.publish']('G@stack_id:' ~ grains.stack_id ~ ' and G@roles:storm.nimbus', 'grains.get', 'fqdn', 'compound').values()|first() %}
{% set zookeeper_hosts = salt['publish.publish']('G@stack_id:' ~ grains.stack_id ~ ' and G@roles:cdh4.zookeeper', 'grains.get', 'fqdn', 'compound').values() %}

{% if zookeeper_hosts %}
storm.zookeeper.servers:
{% for host in zookeeper_hosts %}
  - {{ host}}
{% endfor %}
{% endif %}

nimbus.host: {{ nimbus_host }}

storm.local.dir: {{ pillar.storm.local_dir }}
